@{
    Layout = "_Layout";
    string policy = ViewBag.policy;
    string signature = ViewBag.signature;
    string bucket = ViewBag.bucket;

}
@*<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Bulk Upload to UPYUN</title>
    <link rel="stylesheet" href="asset/main.css" />
</head>
<body>*@

    <h1>批量上传又拍云示例</h1>
    <ul>
        <li>不需要经过服务器，直接使用又拍云的HTTP FORM API向它批量传输图片。</li>
        <li>多选图片使用plupload插件</li>
        <li>调用方式请看<a href="https://github.com/zry656565/bulk-upload-to-UPYUN">源码</a></li>
        <li>源码解释请移步我的博客：<a href="http://jerryzou.com/posts/bulkUploadToUPYUN/">http://jerryzou.com/posts/bulkUploadToUPYUN/</a></li>
    </ul>

    <h3>文件列表：</h3>
    <div id="filelist">Your browser doesn't have Flash, Silverlight or HTML5 support.</div>
    <br />

    <div id="container">
        <a id="pickfiles" href="javascript:;">[选择文件...]</a>
        <a id="uploadfiles" href="javascript:;">[上传文件...]</a>
    </div>

<pre id="console"></pre>

@*</body>


</html>*@
@section Scripts {
    <script>
        //var options = {
        //    'bucket': '',
        //    'save-key': '/{year}/{mon}/{day}/{fileMD5}{.suffix}',
        //    //'expiration': Math.floor(new Date().getTime() / 1000) + 86400
        //    'expiration': 86400
        //};
        // 查看更多参数：http://docs.upyun.com/api/form_api/#表单API接口简介
        //var policy = window.btoa(JSON.stringify(options))
        // 从 UPYUN 用户管理后台获取表单 API
        //var form_api_secret = '';
        // 计算签名
        //var signature = MD5(policy + '&' + form_api_secret);
        var policy = '@policy';
        var signature = '@signature';
        var bucket = '@bucket';
    </script>
    <script src="~/libs/plupload/lib/plupload-2.1.2/js/plupload.full.min.js"></script>
    <script src="~/libs/plupload/lib/md5.js"></script>
    <script src="~/libs/plupload/asset/main.js"></script>
}